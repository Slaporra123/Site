<script>
  async function carregarImagens() {
    try {
      // 1. Carrega a lista de imagens
      const response = await fetch('/imagens.json?t=' + Date.now());
      
      if (!response.ok) {
        throw new Error(`HTTP error! status: ${response.status}`);
      }
      
      const imagens = await response.json();

      // 2. Verifica se há imagens
      if (imagens.length === 0) {
        throw new Error('Nenhuma imagem encontrada no JSON!');
      }

      // 3. Exibe as imagens
      const gallery = document.getElementById('gallery');
      gallery.innerHTML = imagens
        .sort(() => Math.random() - 0.5)
        .slice(0, 2)
        .map(imagem => `
          <div class="photo">
            <img src="/fotos/${imagem}" 
                 alt="Nossa foto" 
                 onerror="this.style.display='none'">
          </div>
        `).join('');
        
    } catch (error) {
      console.error('Erro:', error);
      document.getElementById('gallery').innerHTML = `
        <p style="color: red">⚠️ Erro ao carregar fotos: ${error.message}</p>
      `;
    }
  }
</script>
